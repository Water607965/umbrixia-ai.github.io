<!DOCTYPE html>
 <html lang="en">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <meta name="theme-color" content="#0d0d0d" />
   <link rel="icon" href="/favicon.ico" type="image/x-icon" />
   <title>Umbrixia AI Tutor</title>
   <link rel="stylesheet" href="styles.css" />
   <link rel="preconnect" href="https://fonts.googleapis.com" />
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  

 </head>
 <body>

<!-- Modern Navbar -->
<header class="modern-navbar">
  <div class="navbar-inner">
    <div class="navbar-left">
      <a href="/" class="logo">Umbrixia</a>
    </div>
    <nav class="navbar-links">
      <a href="#features">Features</a>
      <a href="#chatbox">Demo</a>
      <a href="#auth-section">Pricing</a>
      <a href="#success">Success</a>
    </nav>
    <div class="navbar-right">
      <a href="login.html" class="nav-btn login">Login</a>
      <a href="signup.html" class="nav-btn signup">Get Started</a>
    </div>
  </div>
</header>
  
  <header class="hero">
    <!-- Particle background -->
    <canvas id="hero-particles"></canvas>
    <div class="gradient-overlay"></div>

    <!-- Hero Inner Content -->
    <div class="hero-inner">
      <div class="hero-copy">
        <!-- Typewriter Title -->
        <h1 class="hero-title">
          <span id="typewriter"></span><span class="cursor">|</span>
        </h1>
        <p class="hero-subtitle">
          AI‑powered prep for SHSAT, ISEE &amp; SAT—refined, efficient, entirely yours.
        </p>

        <!-- CTAs -->
<div class="hero-cta">
  <a href="signup.html" class="btn btn-primary">Start Free</a>
  <button id="demo-btn" class="btn btn-outline">Try Demo</button>
  <button id="btn-google-special" onclick="googleLogin()" class="btn btn-google-special">
    <img src="google-icon.svg" alt="Google" class="icon"/><span>Continue with Google</span>
  </button>
</div>


    <!-- Scroll‑down Hint -->
    <div class="scroll-down">▼</div>
  </header>

  <!-- Above‑the‑fold Extras -->
  <section class="rotating-headline">
    <h2 id="rotating-text">
      Trusted by students. Powered by AI. Mastery in minutes. Confidence every day.
    </h2>
  </section>

  <section class="stats-section">
    <div class="stats-row">
      <div class="stat-box"><strong>➤</strong><span>Adaptive Learning</span></div>
      <div class="stat-box"><strong>✓</strong><span>Instant Feedback</span></div>
      <div class="stat-box"><strong>⚡</strong><span>Faster Mastery</span></div>
    </div>
  </section>

  <section id="features" class="features-section">
    <div class="features-container">
      <h2 class="section-title">Why Umbrixia Stands Out</h2>
      <div class="features-grid">
        <div class="feature-card">
          <div class="card-icon">🔬</div>
          <h3>Precision AI</h3>
          <p>Adaptive questions that evolve with your skill level.</p>
        </div>
        <div class="feature-card">
          <div class="card-icon">📊</div>
          <h3>Live Insights</h3>
          <p>Real‑time dashboards show exactly where to focus next.</p>
        </div>
        <div class="feature-card">
          <div class="card-icon">💡</div>
          <h3>Smart Feedback</h3>
          <p>Step‑by‑step explanations that deepen understanding.</p>
        </div>
        <div class="feature-card">
          <div class="card-icon">🚀</div>
          <h3>Quick‑Start Quiz</h3>
          <p>Your personalized study path in under a minute.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="designed-for-mastery">
    <h2 class="section-title">Designed for Mastery</h2>
    <div class="mastery-grid">
      <div class="mastery-card">
        <h3>Adaptive Practice</h3>
        <p>The harder you get, the smarter we get.</p>
      </div>
      <div class="mastery-card">
        <h3>Focus Mode</h3>
        <p>Distraction‑free interface—just you and your goals.</p>
      </div>
      <div class="mastery-card">
        <h3>Confidence Bar</h3>
        <p>Track progress with visual milestones and streaks.</p>
      </div>
    </div>
  </section>
       
  <!-- Toast Container -->
  <div class="toast-container"></div>


  

  
  <!-- Avatar & Dropdown -->
<div class="user-avatar" id="avatarMenu" style="position:absolute; top:20px; right:20px;">
  <div class="avatar-circle" onclick="toggleUserMenu()">👤</div>
</div>

<div id="userDropdownPanel" class="user-dropdown hidden" style="position:absolute; top:60px; right:20px; background:#111; padding:12px; border-radius:10px;">
  <p id="dropdownName">👤 User</p>
  <a href="dashboard.html">📊 Dashboard</a>
  <a href="#auth-section">💳 Subscribe</a>
  <a href="#" onclick="logoutHandler()">🚪 Log Out</a>
</div>

  <!-- 👇 Add this button right below your dropdown panel -->
<button id="profile-btn" style="display:none; position:absolute; top:120px; right:20px;">Profile</button>




 
   <section class="vision-section">
   <h2 class="section-title">What If Studying Felt Powerful?</h2>
   <p class="vision-subtitle">Umbrixia is built for the future of test prep — personalized, intelligent, and designed to make students feel confident and in control. This is not just another study tool. It's your edge.</p>
   <div class="vision-call">
     <a href="signup.html" class="cta-btn red">Try It — Free Demo</a>
   </div>
 </section>
 
 
 <!-- Rotating Headline -->
 <section class="rotating-headline">
   <h2 id="rotating-text">Trusted by students. Powered by AI.</h2>
 </section>
 
 <!-- Stats -->
 <section class="section">
   <h2>Why Students Trust Us</h2>
   <div class="stats-row">
     <div class="stat-box">
       <strong>Addictive</strong>
       <span>Significantly faster score gain</span>
     </div>
     <div class="stat-box">
       <strong>10+</strong>
       <span>Practice tests across multiple standardized tests</span>
     </div>
     <div class="stat-box">
       <strong>100%</strong>
       <span>Accuracy rate</span>
     </div>
   </div>
 </section>
 
 <!-- What Makes Umbrixia Stand Out? -->
<section id="features" class="features-section">
  <div class="features-container">
    <h2 class="section-title">What Makes Umbrixia Stand Out?</h2>
    <p class="section-subtitle">
      Innovative features designed for mastery, clarity, and confidence.
    </p>
    <div class="features-grid">
      <div class="feature-card">
        <div class="card-icon">🔬</div>
        <h3>Precision AI</h3>
        <p>Adaptive AI trained on real SHSAT, ISEE &amp; SAT questions for pinpoint accuracy.</p>
      </div>
      <div class="feature-card">
        <div class="card-icon">📈</div>
        <h3>Student Dashboard</h3>
        <p>Track your progress with intuitive charts and clear insights, updated live.</p>
      </div>
      <div class="feature-card">
        <div class="card-icon">🧠</div>
        <h3>Smart Feedback</h3>
        <p>Instant, step‑by‑step explanations that teach you as you solve.</p>
      </div>
      <div class="feature-card">
        <div class="card-icon">💡</div>
        <h3>Diagnostic Insights</h3>
        <p>Kick off with a short quiz that tailors every lesson to you.</p>
      </div>
    </div>
  </div>
</section>


 
   <section class="designed-for-mastery">
   <h2 class="section-title">Designed for Mastery</h2>
   <div class="mastery-grid">
     <div class="mastery-card">
       <h3>Practice That Adapts</h3>
       <p>Umbrixia intelligently evolves with you — delivering questions that challenge and strengthen.</p>
     </div>
     <div class="mastery-card">
       <h3>Feedback You Can Trust</h3>
       <p>Step-by-step logic for every answer. Learn why you're right — or wrong — every single time.</p>
     </div>
     <div class="mastery-card">
       <h3>Built-In Focus</h3>
       <p>Minimalist design with maximal results. No distractions. Just growth.</p>
     </div>
   </div>
 </section>
 
 
 <section class="why-graph-wrapper">
   <!-- Left Text Column -->
   <div class="why-text-card">
     <h2>Why Umbrixia?</h2>
     <ul>
       <li>Purpose-built for ISEE, SHSAT, and SAT mastery</li>
       <li>Step-by-step intelligent explanations</li>
       <li>AI adapts as you improve</li>
       <li>Elegant and distraction-free interface</li>
       <li>Loved by parents, trusted by students</li>
     </ul>
     <button class="cta-btn">Subscribe Now</button>
   </div>
 
   <!-- Right Graph Column -->
   <div class="graph-card">
     <h3>When Smart Work Meets Hard Work</h3>
     <p>They intersect and erupt into exponential success. See the difference Umbrixia makes.</p>
     <img src="umbrixia_growth_curve.png" alt="Graph of Umbrixia's success curve" />
   </div>
 </section>
 
 
 <!-- Chat Section -->
 <section class="section" id="chatbox">
   <div id="chat">
     <div class="message bot">
       <strong>Bot:</strong> Welcome! Ask me an ISEE, SHSAT, or SAT question or pick an example:
     </div>
     <div class="examples">
       <label for="exam-select">Choose Exam:</label>
       <select id="exam-select" onchange="switchExam()">
         <option value="shsat">SHSAT</option>
         <option value="isee">ISEE</option>
         <option value="sat">SAT</option>
       </select>
       <div id="example-buttons"></div>
     </div>
   </div>
   <input type="text" id="userInput" placeholder="Type your ISEE, SHSAT, or SAT question..." />
   <button onclick="sendMessage()">Send</button>
 </section>
 
 
 <!-- Footer -->
 <footer>
   <p>&copy; 2025 Umbrixia.ai • Built for Students. Powered by OpenAI.</p>
 </footer>
 
 <!-- ✅ Firebase SDKs -->
 <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
 <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
 
 <!-- ✅ Auth Logic -->
 <script>
   const firebaseConfig = {
     apiKey: "AIzaSyDDcAp59mkTutfXgnRIBWpVww3jFyzOtIc",
     authDomain: "umbrixia-d804f.firebaseapp.com",
     projectId: "umbrixia-d804f",
     storageBucket: "umbrixia-d804f.firebasestorage.app",
     messagingSenderId: "532093768601",
     appId: "1:532093768601:web:4e94149269d88213edb908"
   };
 
   // Initialize Firebase
   firebase.initializeApp(firebaseConfig);
   const auth = firebase.auth();
   auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);
 
   // Signup
   window.signup = function(email, password) {
     return auth.createUserWithEmailAndPassword(email, password)
       .then(userCredential => {
         localStorage.setItem("trialStart", Date.now());
         alert("✅ Signup successful!");
         return userCredential;
       })
       .catch(error => {
         alert("❌ Signup error: " + error.message);
       });
   };
 
   // Login
   window.login = function(email, password) {
     return auth.signInWithEmailAndPassword(email, password)
       .then(userCredential => {
         alert("✅ Login successful!");
         return userCredential;
       })
       .catch(error => {
         alert("❌ Login error: " + error.message);
       });
   };
 
   // Google Login
   window.googleLogin = function() {
     const provider = new firebase.auth.GoogleAuthProvider();
     auth.signInWithPopup(provider)
       .then(result => {
         localStorage.setItem("trialStart", Date.now());
         showWelcome(result.user);
         alert("✅ Logged in with Google");
       })
       .catch(error => {
         alert("❌ Google login failed: " + error.message);
       });
   };
 
   // Logout
   window.logout = function() {
     return auth.signOut().then(() => {
       alert("👋 Logged out.");
     });
   };
 
   // Check trial expiration
   window.checkTrial = function() {
     const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
     const now = Date.now();
     const sevenDays = 7 * 24 * 60 * 60 * 1000;
 
     if (trialStart && now - trialStart > sevenDays) {
       alert("🚫 Your free trial has expired. Please subscribe to continue.");
       // Redirect or lock features here
     }
   };
 </script>
 
 <script>
   function loginHandler() {
     const email = document.getElementById("email").value;
     const password = document.getElementById("password").value;
     login(email, password);
   }
 
   function signupHandler() {
     const email = document.getElementById("email").value;
     const password = document.getElementById("password").value;
     signup(email, password);
   }
 
   function logoutHandler() {
  logout().then(() => {
    document.getElementById("dropdownName").innerText = "User";
    localStorage.removeItem("displayName");
    localStorage.removeItem("userEmail");
    alert("👋 Logged out.");
  });
}

  

 
   // Optional: Automatically check trial on load
   document.addEventListener("DOMContentLoaded", () => {
     if (typeof checkTrial === "function") {
       checkTrial();
     }
    const savedName = localStorage.getItem("displayName");
  if (savedName) {
    document.getElementById("auth-status").innerText = `👋 Welcome, ${savedName}`;
  }
   });

 </script>
 
 
 <!-- ✅ Your main site logic AFTER all auth -->
 <script src="script.js" defer></script>
 
<!-- 🔽 Insert block RIGHT BELOW -->
<script>
  function showWelcome(user) {
  let name = user.displayName || user.email || "user";
  if (name.includes(" ")) name = name.split(" ")[0]; // only first name
  document.getElementById("auth-status").innerHTML = `👋 <span style="color:#ff4d4d; font-weight:600;">Welcome, ${name}</span>`;
  localStorage.setItem("displayName", name);
}


 // 🔒 Trial-based redirect after welcome
function checkAndRedirectToDashboard() {
  const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
  const now = Date.now();
  const sevenDays = 7 * 24 * 60 * 60 * 1000;

  if (trialStart && now - trialStart <= sevenDays) {
    window.location.href = "dashboard.html"; // Redirect to dashboard
  } else if (trialStart && now - trialStart > sevenDays) {
    alert("🚫 Trial expired. Please subscribe to continue.");
  }
}


  function redirectToDashboardIfValid() {
    const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
    const email = localStorage.getItem("userEmail");
    const now = Date.now();
    const sevenDays = 7 * 24 * 60 * 60 * 1000;

    if (trialStart && email && now - trialStart <= sevenDays) {
      window.location.href = "/dashboard.html";
    }
  }

  firebase.auth().onAuthStateChanged(user => {
  const logoutBtn = document.getElementById("logout-btn");
  const profileBtn = document.getElementById("profile-btn"); // ✅ add this line
  const prompt = document.getElementById("dashboard-prompt");


  if (user) {
    const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
    const now = Date.now();
    const isTrialActive = trialStart && now - trialStart <= 7 * 24 * 60 * 60 * 1000;

    logoutBtn.style.display = "block";
    profileBtn.style.display = "block";
    showWelcome(user);

    if (isTrialActive && prompt) prompt.style.display = "block";
    else alert("🚫 Trial expired. Please subscribe to continue.");
  } else {
    logoutBtn.style.display = "none";
    profileBtn.style.display = "none";
  }
});



   


    
    

    let isTrialActive = false;
firebase.auth().onAuthStateChanged(user => {
  const logoutBtn = document.getElementById("logout-btn");
  const profileBtn = document.getElementById("profile-btn");
  const prompt = document.getElementById("dashboard-prompt");

  if (user) {
    const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
    const now = Date.now();
    isTrialActive = trialStart && now - trialStart <= 7 * 24 * 60 * 60 * 1000;

    logoutBtn.style.display = "block";
    if (profileBtn) profileBtn.style.display = "block";
    showWelcome(user);

    if (isTrialActive && prompt) prompt.style.display = "block";
    else alert("🚫 Trial expired. Please subscribe to continue.");
  } else {
    logoutBtn.style.display = "none";
    if (profileBtn) profileBtn.style.display = "none";
  }

  // 👇 Move this block **inside** here, or it'll crash
  if (prompt) {
    if (isTrialActive) {
      prompt.style.display = "block";
    } else {
      alert("🚫 Trial expired. Please subscribe to continue.");
    }
  }
});


 function unifiedAuthHandler() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const name = document.getElementById("name-auth").value;

  auth.fetchSignInMethodsForEmail(email)
    .then(methods => {
      if (methods.length > 0) {
        return login(email, password);
      } else {
        return auth.createUserWithEmailAndPassword(email, password).then(userCred => {
          return userCred.user.updateProfile({ displayName: name }).then(() => {
            auth.currentUser.sendEmailVerification();
            return userCred;
          });
        });
      }
    })
    .then(userCred => {
      showWelcome(userCred.user);
    })
    .catch(err => {
      alert("❌ Auth error: " + err.message);
    });
}

 
  function toggleUserMenu() {
  const menu = document.getElementById("userDropdownPanel");
  if (menu) {
    menu.classList.toggle("hidden");
  }
}


    
</script>

 <script>

  document.getElementById("googleBtn").addEventListener("click", () => {
    googleLogin();
  });

  document.getElementById("logoutBtn").addEventListener("click", () => {
    logout();
  });
</script>


  

  
 </body>
 </html>
