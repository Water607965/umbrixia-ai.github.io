<!DOCTYPE html>
 <html lang="en">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <meta name="theme-color" content="#0d0d0d" />
   <link rel="icon" href="/favicon.ico" type="image/x-icon" />
   <title>Umbrixia AI Tutor</title>
   <link rel="stylesheet" href="styles.css" />
   <link rel="preconnect" href="https://fonts.googleapis.com" />
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  

 </head>
 <body>

  <div id="greeting" class="rainbow-greeting hidden"></div>

<!-- Apple-Style Navbar -->
<header class="umbrixia-header">
  <div class="umbrixia-navbar">
    <div class="logo-area"><a href="/">Umbrixia</a></div>
    <nav class="nav-links">
      <a href="#features">Features</a>
      <a href="#chatbox">Demo</a>
      <a href="#auth-section">Pricing</a>
      <a href="#success">Success</a>
    </nav>
    <div class="nav-actions">
      <a href="login.html" class="btn-link">Login</a>
      <a href="signup.html" class="btn-solid">Get Started</a>
    </div>
  </div>
</header>

<section id="apple-hero-pro" class="apple-hero-section">
  <div class="apple-hero-content">
    <h1 class="apple-hero-title">Meet Umbrixia AI Tutor</h1>
    <p class="apple-hero-subtitle">
      AI prep for SHSAT, ISEE & SAT. Smart, personal, and built to elevate.
    </p>
    <div class="apple-hero-cta">
      <a href="signup.html" class="apple-btn dark">Start Free</a>
      <a href="demo.html" class="apple-btn light">Try Demo</a>
    </div>
    <div class="apple-hero-image-wrapper">
      <img src="assets/hero-tutor.png" alt="Umbrixia AI Tutor" class="apple-hero-image" />
    </div>
   <p class="rainbow-tagline">Study Smarter. Shine Brighter.</p>
  </div>
</section>

<section class="empower-section">
  <h2 class="empower-title">
    Built to Empower.<br />
    <span class="highlight">Backed by <span class="ai-text">AI</span>. Designed to <span class="impress-text">Impress</span>.</span>
  </h2>

  <div class="empower-cards">
    <div class="empower-card">
      <div class="icon">🎯</div>
      <h3 class="rainbow-tagline">Hyper-targeted Prep</h3>
      <p>Pinpoint learning that adapts to your every move.</p>
    </div>
    <div class="empower-card">
      <div class="icon">📊</div>
      <h3>Real-time Insights</h3>
      <p>Track what matters most, instantly and clearly.</p>
    </div>
    <div class="empower-card">
      <div class="icon">⚡</div>
      <h3 class="rainbow-tagline">Faster Mastery</h3>
      <p>Accelerated progress powered by intelligent AI feedback.</p>
    </div>
  </div>
</section>







<!-- ✅ Refined 'Why Umbrixia Stands Out' Section -->
<section class="why-umbrixia-apple">
  <h2 class="why-title">Why Umbrixia Stands Out</h2>
  <p class="why-subtitle">Design meets intelligence. Simplicity meets power.</p>
  <div class="features-apple">
    <div class="feature-box">
      <div class="emoji">✏️</div>
      <h3>Personalized Learning</h3>
      <p>Adaptive experiences that evolve with you every time.</p>
    </div>
    <div class="feature-box">
      <div class="emoji">📈</div>
      <h3>Real-Time Analytics</h3>
      <p>Every action visualized. Know exactly where you stand.</p>
    </div>
    <div class="feature-box">
      <div class="emoji">🧠</div>
      <h3>AI-Powered Insights</h3>
      <p>Targeted feedback, curated paths, and predictive success.</p>
    </div>
  </div>
</section>


<section id="umbrixia-mastery" class="apple-section">
  <h2 class="apple-title apple-gradient">Designed for Mastery</h2>
  <div class="apple-card-row">
    <div class="apple-card">
      <div class="emoji">🎯</div>
      <h3>Adaptive Practice</h3>
      <p>The harder you get, the smarter we get — always pushing your potential.</p>
    </div>
    <div class="apple-card">
      <div class="emoji">🧘</div>
      <h3>Focus Mode</h3>
      <p>Distraction-free zone. Just you and your goals — minimalism meets power.</p>
    </div>
    <div class="apple-card">
      <div class="emoji">📊</div>
      <h3>Confidence Bar</h3>
      <p>Track progress with intuitive streaks and smart milestones that drive growth.</p>
    </div>
  </div>
</section>




       
  <!-- Toast Container -->
  <div class="toast-container"></div>


  

  
 <!-- Profile Avatar (place this INSIDE .umbrixia-navbar div, after .nav-actions) -->
<div id="avatarMenu" class="user-avatar">
  <div class="avatar-circle" onclick="toggleUserMenu()">👤</div>
</div>


<div id="userDropdownPanel" class="user-dropdown hidden" style="position:absolute; top:60px; right:20px; background:#111; padding:12px; border-radius:10px;">
  <p id="dropdownName">👤 User</p>
  <a href="dashboard.html">📊 Dashboard</a>
  <a href="#auth-section">💳 Subscribe</a>
  <a href="#" onclick="logoutHandler()">🚪 Log Out</a>
     <a href="javascript:void(0);" id="settingsBtn">⚙️ Settings</a>
</div>

  <!-- 👇 Add this button right below your dropdown panel -->
<button id="profile-btn" style="display:none; position:absolute; top:120px; right:20px;">Profile</button>




 
   
<section class="powerful-section">
  <h2 class="rainbow-tagline">What If Studying Felt Powerful?</h2>
  <p class="section-subtitle">
    Umbrixia is built for the future of test prep — personalized, intelligent, and designed<br />
    to make students feel confident and in control. This is not just another study tool.<br />
    It’s your edge.
  </p>
  <div class="cta-center">
    <a href="signup.html" class="cta-btn rainbow-tagline">Try It — Free Demo</a>
  </div>
</section>
 
 
 <section class="why-graph-wrapper">
   <!-- Left Text Column -->
   <div class="why-text-card">
     <h2>Why Umbrixia?</h2>
     <ul>
       <li>Purpose-built for ISEE, SHSAT, and SAT mastery</li>
       <li>Step-by-step intelligent explanations</li>
       <li>AI adapts as you improve</li>
       <li>Elegant and distraction-free interface</li>
       <li>Loved by parents, trusted by students</li>
     </ul>
     <button class="cta-btn">Subscribe Now</button>
   </div>
 
   <!-- Right Graph Column -->
   <div class="graph-card">
     <h3>When Smart Work Meets Hard Work</h3>
     <p>They intersect and erupt into exponential success. See the difference Umbrixia makes.</p>
     <img src="umbrixia_growth_curve.png" alt="Graph of Umbrixia's success curve" />
   </div>
 </section>
 
 
 <!-- Chat Section -->
 <section class="section" id="chatbox">
   <div id="chat">
     <div class="message bot">
       <strong>Bot:</strong> Welcome! Ask me an ISEE, SHSAT, or SAT question or pick an example:
     </div>
     <div class="examples">
       <label for="exam-select">Choose Exam:</label>
       <select id="exam-select" onchange="switchExam()">
         <option value="shsat">SHSAT</option>
         <option value="isee">ISEE</option>
         <option value="sat">SAT</option>
       </select>
       <div id="example-buttons"></div>
     </div>
   </div>
   <input type="text" id="userInput" placeholder="Type your ISEE, SHSAT, or SAT question..." />
   <button onclick="sendMessage()">Send</button>
 </section>

<!-- Settings Panel -->
<section id="settingsPanel" class="settings-panel hidden">

  <h2 class="section-title">🎛️ Your Settings</h2>
  <p>Customize your preferences, connect accounts, and get admissions predictions.</p>

  <div class="settings-grid">
    <div class="setting-card">
      <h3>🎯 College Match AI</h3>
      <p>Upload test scores, essays, and extracurriculars. Our AI will show your odds at top schools.</p>
    </div>
    <div class="setting-card">
      <h3>🔐 Security & Access</h3>
      <p>Enable 2FA, link Apple, Google, or Microsoft accounts, and add passkey options.</p>
    </div>
    <div class="setting-card">
      <h3>🎨 Theme Mode</h3>
      <p>Select Light, Dark, or System theme with one click. Your comfort, your choice.</p>
    </div>
  </div>

  <button class="btn-primary" style="margin-top: 1rem;">Save Preferences</button>
</section>

 
 
 <!-- Footer -->
 <footer>
   <p>&copy; 2025 Umbrixia.ai • Built for Students. Powered by OpenAI.</p>
 </footer>
 
 <!-- ✅ Firebase SDKs -->
 <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
 <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
 
 <!-- ✅ Auth Logic -->
 <script>
   const firebaseConfig = {
     apiKey: "AIzaSyDDcAp59mkTutfXgnRIBWpVww3jFyzOtIc",
     authDomain: "umbrixia-d804f.firebaseapp.com",
     projectId: "umbrixia-d804f",
     storageBucket: "umbrixia-d804f.firebasestorage.app",
     messagingSenderId: "532093768601",
     appId: "1:532093768601:web:4e94149269d88213edb908"
   };
 
   // Initialize Firebase
   firebase.initializeApp(firebaseConfig);
   const auth = firebase.auth();
   auth.setPersistence(firebase.auth.Auth.Persistence.LOCAL);
 
   // Signup
   window.signup = function(email, password) {
     return auth.createUserWithEmailAndPassword(email, password)
       .then(userCredential => {
         localStorage.setItem("trialStart", Date.now());
         alert("✅ Signup successful!");
         return userCredential;
       })
       .catch(error => {
         alert("❌ Signup error: " + error.message);
       });
   };
 
   // Login
   window.login = function(email, password) {
     return auth.signInWithEmailAndPassword(email, password)
       .then(userCredential => {
         alert("✅ Login successful!");
         return userCredential;
       })
       .catch(error => {
         alert("❌ Login error: " + error.message);
       });
   };
 
   // Google Login
   window.googleLogin = function() {
     const provider = new firebase.auth.GoogleAuthProvider();
     auth.signInWithPopup(provider)
       .then(result => {
         localStorage.setItem("trialStart", Date.now());
         showWelcome(result.user);
         alert("✅ Logged in with Google");
       })
       .catch(error => {
         alert("❌ Google login failed: " + error.message);
       });
   };
 
   // Logout
   window.logout = function() {
     return auth.signOut().then(() => {
       alert("👋 Logged out.");
     });
   };
 
   // Check trial expiration
   window.checkTrial = function() {
     const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
     const now = Date.now();
     const sevenDays = 7 * 24 * 60 * 60 * 1000;
 
     if (trialStart && now - trialStart > sevenDays) {
       alert("🚫 Your free trial has expired. Please subscribe to continue.");
       // Redirect or lock features here
     }
   };
 </script>
 
 <script>
   function loginHandler() {
     const email = document.getElementById("email").value;
     const password = document.getElementById("password").value;
     login(email, password);
   }
 
   function signupHandler() {
     const email = document.getElementById("email").value;
     const password = document.getElementById("password").value;
     signup(email, password);
   }
 
   function logoutHandler() {
  logout().then(() => {
    document.getElementById("dropdownName").innerText = "User";
    localStorage.removeItem("displayName");
    localStorage.removeItem("userEmail");
    alert("👋 Logged out.");
  });
}

  

 
   // Optional: Automatically check trial on load
   document.addEventListener("DOMContentLoaded", () => {
     if (typeof checkTrial === "function") {
       checkTrial();
     }
    const savedName = localStorage.getItem("displayName");
  if (savedName) {
    document.getElementById("auth-status").innerText = `👋 Welcome, ${savedName}`;
  }
   });

 </script>
 
 
 <!-- ✅ Your main site logic AFTER all auth -->
 <script src="script.js" defer></script>
 
<!-- 🔽 Insert block RIGHT BELOW -->
<script>
  function showWelcome(user) {
  let name = user.displayName || user.email || "user";
  if (name.includes(" ")) name = name.split(" ")[0]; // only first name
  document.getElementById("auth-status").innerHTML = `👋 <span style="color:#ff4d4d; font-weight:600;">Welcome, ${name}</span>`;
  localStorage.setItem("displayName", name);
}


 // 🔒 Trial-based redirect after welcome
function checkAndRedirectToDashboard() {
  const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
  const now = Date.now();
  const sevenDays = 7 * 24 * 60 * 60 * 1000;

  if (trialStart && now - trialStart <= sevenDays) {
    window.location.href = "dashboard.html"; // Redirect to dashboard
  } else if (trialStart && now - trialStart > sevenDays) {
    alert("🚫 Trial expired. Please subscribe to continue.");
  }
}


  function redirectToDashboardIfValid() {
    const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
    const email = localStorage.getItem("userEmail");
    const now = Date.now();
    const sevenDays = 7 * 24 * 60 * 60 * 1000;

    if (trialStart && email && now - trialStart <= sevenDays) {
      window.location.href = "/dashboard.html";
    }
  }

  firebase.auth().onAuthStateChanged(user => {
  const logoutBtn = document.getElementById("logout-btn");
  const profileBtn = document.getElementById("profile-btn"); // ✅ add this line
  const prompt = document.getElementById("dashboard-prompt");


  if (user) {
    const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
    const now = Date.now();
    const isTrialActive = trialStart && now - trialStart <= 7 * 24 * 60 * 60 * 1000;

    logoutBtn.style.display = "block";
    profileBtn.style.display = "block";
    showWelcome(user);

    if (isTrialActive && prompt) prompt.style.display = "block";
    else alert("🚫 Trial expired. Please subscribe to continue.");
  } else {
    logoutBtn.style.display = "none";
    profileBtn.style.display = "none";
  }
});



   


    
    

    let isTrialActive = false;
firebase.auth().onAuthStateChanged(user => {
  const logoutBtn = document.getElementById("logout-btn");
  const profileBtn = document.getElementById("profile-btn");
  const prompt = document.getElementById("dashboard-prompt");

  if (user) {
    const trialStart = parseInt(localStorage.getItem("trialStart"), 10);
    const now = Date.now();
    isTrialActive = trialStart && now - trialStart <= 7 * 24 * 60 * 60 * 1000;

    logoutBtn.style.display = "block";
    if (profileBtn) profileBtn.style.display = "block";
    showWelcome(user);

    if (isTrialActive && prompt) prompt.style.display = "block";
    else alert("🚫 Trial expired. Please subscribe to continue.");
  } else {
    logoutBtn.style.display = "none";
    if (profileBtn) profileBtn.style.display = "none";
  }

  // 👇 Move this block **inside** here, or it'll crash
  if (prompt) {
    if (isTrialActive) {
      prompt.style.display = "block";
    } else {
      alert("🚫 Trial expired. Please subscribe to continue.");
    }
  }
});


 function unifiedAuthHandler() {
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const name = document.getElementById("name-auth").value;

  auth.fetchSignInMethodsForEmail(email)
    .then(methods => {
      if (methods.length > 0) {
        return login(email, password);
      } else {
        return auth.createUserWithEmailAndPassword(email, password).then(userCred => {
          return userCred.user.updateProfile({ displayName: name }).then(() => {
            auth.currentUser.sendEmailVerification();
            return userCred;
          });
        });
      }
    })
    .then(userCred => {
      showWelcome(userCred.user);
    })
    .catch(err => {
      alert("❌ Auth error: " + err.message);
    });
}

 
  function toggleUserMenu() {
  const menu = document.getElementById("userDropdownPanel");
  if (menu) {
    menu.classList.toggle("hidden");
  }
}

 document.getElementById("settingsBtn").addEventListener("click", () => {
  document.getElementById("settingsPanel").classList.remove("hidden");
});

document.getElementById("closeSettings").addEventListener("click", () => {
  document.getElementById("settingsPanel").classList.add("hidden");
});

const tabs = document.querySelectorAll(".settings-tabs button");
const panes = document.querySelectorAll(".tab-pane");

tabs.forEach(tab => {
  tab.addEventListener("click", () => {
    tabs.forEach(btn => btn.classList.remove("active"));
    tab.classList.add("active");

    panes.forEach(pane => pane.classList.remove("active"));
    document.getElementById(`tab-${tab.dataset.tab}`).classList.add("active");
  });
});



    
</script>

 <script>

  document.getElementById("googleBtn").addEventListener("click", () => {
    googleLogin();
  });

  document.getElementById("logoutBtn").addEventListener("click", () => {
    logout();
  });
</script>

<script>
  const collegeData = {
    "Harvard": { avgSAT: 1520, acceptanceRate: 0.04 },
    "MIT": { avgSAT: 1535, acceptanceRate: 0.066 },
    "Stanford": { avgSAT: 1505, acceptanceRate: 0.043 },
    "Yale": { avgSAT: 1510, acceptanceRate: 0.049 },
    "Princeton": { avgSAT: 1500, acceptanceRate: 0.058 }
  };

  function calculateChance(userSAT, college) {
    const data = collegeData[college];
    if (!data) return null;
    const scoreFactor = Math.min(userSAT / data.avgSAT, 1);
    const adjustedChance = scoreFactor * data.acceptanceRate * 100;
    return adjustedChance.toFixed(2);
  }

  document.getElementById("runPredictor").addEventListener("click", () => {
    const userSAT = parseInt(prompt("Enter your SAT score (400–1600):"), 10);
    if (isNaN(userSAT)) return alert("Enter a valid SAT score.");
    
    const dreams = document.getElementById("dreamColleges").value.split(",").map(c => c.trim());
    const resultsDiv = document.getElementById("predictorResults");
    resultsDiv.innerHTML = "<h4>Predicted Chances:</h4>";

    const chartLabels = [];
    const chartData = [];

    dreams.forEach(college => {
      const chance = calculateChance(userSAT, college);
      const label = chance !== null ? `${chance}% chance` : "Not in database";
      resultsDiv.innerHTML += `<p><strong>${college}</strong>: ${label}</p>`;

      if (chance !== null) {
        chartLabels.push(college);
        chartData.push(parseFloat(chance));
      }
    });

    // Draw chart
    const ctx = document.getElementById("predictorChart").getContext("2d");
    new Chart(ctx, {
      type: "bar",
      data: {
        labels: chartLabels,
        datasets: [{
          label: "Admission Likelihood (%)",
          backgroundColor: "#ff4d4d",
          data: chartData
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: true, max: 100 }
        }
      }
    });
  });
</script>


  

  
 </body>
 </html>
